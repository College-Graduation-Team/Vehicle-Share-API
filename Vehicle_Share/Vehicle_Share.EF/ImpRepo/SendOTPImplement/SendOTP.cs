
using System.Net;
using System.Text;

namespace Vehicle_Share.EF.ImpRepo.SendOTPImplement
{
    public class SendOTP //: ISendOTP
    {
        // private readonly TwilioSettings _twilio;
        const string Url = "https://www.sys-all.com/api";
        const string ApiKey = "WA-25XSVMfdQjvf55mw2qV5KSEP05DLN0y0rt1K-oxr5ZlZqIWoqx52gQlfjnYOD";
        // you can use this online site https://codebeautify.org/image-to-base64-converter
        const string Base64Image = "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";

        /*public SendOTP(IOptions<TwilioSettings> twilio)
        {
            _twilio = twilio.Value;
        }*/

        #region MyRegion
        // public MessageResource Send(string mobileNumber, string otp)
        //   {
        /*TwilioClient.Init(_twilio.AccountSID, _twilio.AuthToken);
        var message = $"This is Verification Code: {otp}";
        Console.WriteLine($"======================= {message} mobileNumber: {mobileNumber} =======================");
        // var result = MessageResource.Create(
        // 		body: message,
        // 		from: new Twilio.Types.PhoneNumber(_twilio.TwilioPhoneNumber),
        // 		to: mobileNumber
        // 	);
        // return result;
        return null;*/
        //  }
        #endregion

        #region Send Otp Api for DotnetCore/DotNetDesktop
        public static async Task<BaseResponseDto<EmptyResponseDto>> Send(string phone,string otp)
        {

            SendOtpRequestDto requestDto = new SendOtpRequestDto
            {
                Message = $"This is Verification Code: {otp}", // your message
                Number = phone //number must start with Country Code (e.g "20", "966", ...)

            };

            string serializedRequest = Newtonsoft.Json.JsonConvert.SerializeObject(new BaseRequestDto<SendOtpRequestDto>(requestDto));


            UTF8Encoding encoding = new UTF8Encoding();
            byte[] bytes = encoding.GetBytes(serializedRequest);
            System.Net.HttpWebRequest httpRequest = (System.Net.HttpWebRequest)System.Net.WebRequest.Create(GenerateRequestUrl("Sender/SendOtp"));
            httpRequest.Method = "POST";
            httpRequest.ContentType = "application/json";
            httpRequest.ContentLength = bytes.Length;
            using (Stream stream = httpRequest.GetRequestStream())
            {
                stream.Write(bytes, 0, bytes.Length);
                stream.Close();
            }

            WebResponse webResponse = httpRequest.GetResponse();
            Console.WriteLine(((HttpWebResponse)webResponse).StatusDescription);
            var webData = webResponse.GetResponseStream();
            StreamReader reader = new StreamReader(webData);
            string responseFromServer = reader.ReadToEnd();
            reader.Close();
            webData.Close();
            webResponse.Close();

            return Newtonsoft.Json.JsonConvert.DeserializeObject<BaseResponseDto<EmptyResponseDto>>(responseFromServer);

        }
        static string GenerateRequestUrl(string endPoint)
        {
            return Url + "/" + endPoint + "?apikey=" + ApiKey;
        }
        #endregion
    }
   
}

